## 🔁 Household Roster Logic: Indexed-Repeat Flowchart

Repeat Group: hh_member
┌────────────────────────────┐
│ Begin repeat hh_member     │
├────────────────────────────┤
│ Text: member_name          │ → Name of member
│ Integer: member_age        │ → Age of member
│ Select_one rel: relationship │ → Relationship to head
└────────────────────────────┘
           ↓
┌────────────────────────────┐
│ End repeat hh_member       │
└────────────────────────────┘

Calculations (outside repeat)
┌────────────────────────────────────────────────────────────┐
│ Calculate: head_index                                      │
│ → position(..) where relationship = 'head'                 │
├────────────────────────────────────────────────────────────┤
│ Calculate: head_age                                        │
│ → indexed-repeat(${member_age}, ${hh_member}, ${head_index}) │
├────────────────────────────────────────────────────────────┤
│ Calculate: head_name                                       │
│ → indexed-repeat(${member_name}, ${hh_member}, ${head_index}) │
├────────────────────────────────────────────────────────────┤
│ Calculate: age_gap                                         │
│ → ${head_age} - ${member_age}                              │
└────────────────────────────────────────────────────────────┘

Notes (displayed to enumerator)
┌────────────────────────────────────────────┐
│ Head of household: ${head_name}, Age: ${head_age} │
├────────────────────────────────────────────┤
│ Age gap with head: ${age_gap} years         │
└────────────────────────────────────────────┘

